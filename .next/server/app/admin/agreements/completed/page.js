(()=>{var e={};e.id=376,e.ids=[376],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},36990:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>s.a,__next_app__:()=>c,pages:()=>p,routeModule:()=>x,tree:()=>l});var n=t(70260),o=t(28203),i=t(25155),s=t.n(i),a=t(67292),d={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>a[e]);t.d(r,d);let l=["",{children:["admin",{children:["agreements",{children:["completed",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,19e3)),"C:\\Users\\denni\\agreements\\app\\admin\\agreements\\completed\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,54899)),"C:\\Users\\denni\\agreements\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,19611)),"C:\\Users\\denni\\agreements\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"]}],p=["C:\\Users\\denni\\agreements\\app\\admin\\agreements\\completed\\page.tsx"],c={require:t,loadChunk:()=>Promise.resolve()},x=new n.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/admin/agreements/completed/page",pathname:"/admin/agreements/completed",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},94481:(e,r,t)=>{Promise.resolve().then(t.bind(t,19e3))},59633:(e,r,t)=>{Promise.resolve().then(t.bind(t,16372))},16372:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var n=t(45512),o=t(58009),i=t(41238),s=t(79334),a=t(45653);function d(){let[e,r]=(0,o.useState)([]),[t,d]=(0,o.useState)(!1),[l,p]=(0,o.useState)(!1),{isDark:c}=(0,i.D)(),x=(0,s.useRouter)(),{showToast:u,ToastContainer:g}=(0,a.d)(),m=async()=>{try{d(!0);let e=await fetch("/api/agreements/completed");if(e.ok){let t=await e.json();r(t)}else u("Failed to fetch completed agreements","error")}catch(e){console.error("Error fetching completed agreements:",e),u("Error fetching completed agreements","error")}finally{d(!1)}},h=async e=>{if(confirm("Are you sure you want to archive this completed agreement? It will be moved to the archived section."))try{d(!0);let r=await fetch("/api/agreements/archive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({agreementId:e})});if(r.ok)u("Agreement archived successfully","success"),m();else{let e=await r.json();u(e.error||"Failed to archive agreement","error")}}catch(e){console.error("Error archiving agreement:",e),u("Error archiving agreement","error")}finally{d(!1)}},f=c?"#1e293b":"#ffffff",b=c?"#f1f5f9":"#1e293b",y=c?"#94a3b8":"#64748b",v=c?"#334155":"#e2e8f0";return(0,n.jsxs)("div",{style:{minHeight:"100vh",backgroundColor:c?"#0f172a":"#f8fafc",padding:l?"16px":"24px"},children:[(0,n.jsx)(g,{}),(0,n.jsxs)("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",flexDirection:l?"column":"row",gap:l?"16px":"0"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{style:{margin:"0 0 8px 0",fontSize:l?"24px":"32px",fontWeight:"700",color:b},children:"Completed Agreements"}),(0,n.jsx)("p",{style:{margin:"0",color:y,fontSize:"16px"},children:"View and manage completed agreements"})]}),(0,n.jsx)("button",{onClick:()=>x.push("/admin/agreements"),style:{backgroundColor:"#6b7280",color:"white",border:"none",padding:l?"12px 20px":"10px 20px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500",width:l?"100%":"auto"},title:"Back to main agreements",children:"← Back to Agreements"})]}),t?(0,n.jsxs)("div",{style:{backgroundColor:f,border:`1px solid ${v}`,borderRadius:"8px",padding:"48px 24px",textAlign:"center"},children:[(0,n.jsx)("div",{style:{fontSize:"24px",marginBottom:"16px"},children:"⏳"}),(0,n.jsx)("p",{style:{margin:"0",color:b},children:"Loading completed agreements..."})]}):0===e.length?(0,n.jsx)("div",{style:{backgroundColor:f,border:`1px solid ${v}`,borderRadius:"8px",padding:"48px 24px",textAlign:"center"},children:(0,n.jsx)("p",{style:{margin:"0",color:y,fontSize:"16px"},children:"No completed agreements found."})}):(0,n.jsx)("div",{style:{display:"grid",gap:"16px"},children:e.map(e=>(0,n.jsxs)("div",{style:{backgroundColor:f,border:`1px solid ${v}`,borderRadius:"8px",padding:"20px"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"12px",flexDirection:l?"column":"row",gap:l?"12px":"0"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{style:{margin:"0 0 4px 0",fontSize:"16px",color:b,fontWeight:"600"},children:e.template.title}),(0,n.jsxs)("p",{style:{margin:"0 0 4px 0",color:y,fontSize:"14px"},children:[e.client.firstName," ",e.client.lastName," (",e.client.email,")"]}),(0,n.jsxs)("p",{style:{margin:"0 0 4px 0",color:y,fontSize:"14px"},children:["Completed: ",e.signedAt?new Date(e.signedAt).toLocaleDateString("en-CA",{timeZone:"America/Toronto"}):"N/A"]})]}),(0,n.jsx)("div",{style:{display:"flex",gap:"8px",flexDirection:l?"column":"row"},children:(0,n.jsx)("span",{style:{fontSize:"12px",color:"white",backgroundColor:"#7c3aed",padding:"4px 8px",borderRadius:"4px",alignSelf:l?"flex-start":"auto"},children:"Completed"})})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[(0,n.jsx)("button",{onClick:()=>window.open(`/agreement/${e.uniqueToken}`,"_blank"),style:{backgroundColor:"#3b82f6",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background-color 0.2s"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#2563eb"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#3b82f6"},title:"View agreement",children:"View"}),(0,n.jsx)("button",{onClick:()=>h(e.id),disabled:t,style:{backgroundColor:t?"#9ca3af":"#6b7280",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:t?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500",transition:"background-color 0.2s"},onMouseEnter:e=>{t||(e.currentTarget.style.backgroundColor="#4b5563")},onMouseLeave:e=>{t||(e.currentTarget.style.backgroundColor="#6b7280")},title:"Archive this completed agreement",children:t?"Archiving...":"Archive"})]})]},e.id))})]})]})}},45653:(e,r,t)=>{"use strict";t.d(r,{d:()=>s});var n=t(45512),o=t(58009);function i({message:e,type:r="success",duration:t=3e3,onClose:i}){let[s,a]=(0,o.useState)(!0);return(0,n.jsx)("div",{style:(()=>{let e={position:"fixed",top:"20px",right:"20px",zIndex:9999,padding:"12px 20px",borderRadius:"8px",color:"white",fontSize:"14px",fontWeight:"500",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",transform:s?"translateX(0)":"translateX(100%)",transition:"transform 0.3s ease-in-out",maxWidth:"300px",wordWrap:"break-word"};switch(r){case"success":default:return{...e,backgroundColor:"#10b981"};case"error":return{...e,backgroundColor:"#ef4444"};case"info":return{...e,backgroundColor:"#3b82f6"}}})(),children:e})}function s(){let[e,r]=(0,o.useState)([]),t=e=>{r(r=>r.filter(r=>r.id!==e))};return{showToast:(e,t="success")=>{let n=Date.now();r(r=>[...r,{id:n,message:e,type:t}])},ToastContainer:()=>(0,n.jsx)("div",{children:e.map(e=>(0,n.jsx)(i,{message:e.message,type:e.type,onClose:()=>t(e.id)},e.id))})}}},19e3:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});let n=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\denni\\\\agreements\\\\app\\\\admin\\\\agreements\\\\completed\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\denni\\agreements\\app\\admin\\agreements\\completed\\page.tsx","default")}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[638,247,730,525],()=>t(36990));module.exports=n})();