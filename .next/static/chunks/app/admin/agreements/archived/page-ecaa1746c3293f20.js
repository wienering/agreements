(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5281],{1482:(e,r,t)=>{Promise.resolve().then(t.bind(t,519))},519:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>l});var n=t(5155),o=t(2115),i=t(8758),a=t(6046),s=t(8129);function l(){let[e,r]=(0,o.useState)([]),[t,l]=(0,o.useState)(!1),[d,c]=(0,o.useState)(!1),{isDark:u}=(0,i.D)(),p=(0,a.useRouter)(),{showToast:x,ToastContainer:g}=(0,s.d)();(0,o.useEffect)(()=>{let e=()=>{c(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,o.useEffect)(()=>{f()},[]);let f=async()=>{try{l(!0);let e=await fetch("/api/agreements/archived");if(e.ok){let t=await e.json();r(t)}else x("Failed to fetch archived agreements","error")}catch(e){console.error("Error fetching archived agreements:",e),x("Error fetching archived agreements","error")}finally{l(!1)}},h=async e=>{if(confirm("Are you sure you want to unarchive this agreement? It will appear back in the main agreements list."))try{l(!0);let r=await fetch("/api/agreements/archive",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({agreementId:e})});if(r.ok)x("Agreement unarchived successfully","success"),f();else{let e=await r.json();x(e.error||"Failed to unarchive agreement","error")}}catch(e){console.error("Error unarchiving agreement:",e),x("Error unarchiving agreement","error")}finally{l(!1)}},m=e=>{switch(e){case"DRAFT":return"Draft";case"LIVE":return"Live";case"SIGNED":return"Signed";case"COMPLETED":return"Completed";case"CANCELLED":return"Cancelled";default:return"Unknown"}},b=u?"#1e293b":"#ffffff",v=u?"#f1f5f9":"#1e293b",y=u?"#94a3b8":"#64748b",w=u?"#334155":"#e2e8f0";return(0,n.jsxs)("div",{style:{minHeight:"100vh",backgroundColor:u?"#0f172a":"#f8fafc",padding:d?"16px":"24px"},children:[(0,n.jsx)(g,{}),(0,n.jsxs)("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",flexDirection:d?"column":"row",gap:d?"16px":"0"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{style:{margin:"0 0 8px 0",fontSize:d?"24px":"32px",fontWeight:"700",color:v},children:"Archived Agreements"}),(0,n.jsx)("p",{style:{margin:"0",color:y,fontSize:"16px"},children:"View and manage archived agreements"})]}),(0,n.jsx)("button",{onClick:()=>p.push("/admin/agreements"),style:{backgroundColor:"#6b7280",color:"white",border:"none",padding:d?"12px 20px":"10px 20px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"500",width:d?"100%":"auto"},title:"Back to main agreements",children:"← Back to Agreements"})]}),t?(0,n.jsxs)("div",{style:{backgroundColor:b,border:"1px solid ".concat(w),borderRadius:"8px",padding:"48px 24px",textAlign:"center"},children:[(0,n.jsx)("div",{style:{fontSize:"24px",marginBottom:"16px"},children:"⏳"}),(0,n.jsx)("p",{style:{margin:"0",color:v},children:"Loading archived agreements..."})]}):0===e.length?(0,n.jsx)("div",{style:{backgroundColor:b,border:"1px solid ".concat(w),borderRadius:"8px",padding:"48px 24px",textAlign:"center"},children:(0,n.jsx)("p",{style:{margin:"0",color:y,fontSize:"16px"},children:"No archived agreements found."})}):(0,n.jsx)("div",{style:{display:"grid",gap:"16px"},children:e.map(e=>(0,n.jsxs)("div",{style:{backgroundColor:b,border:"1px solid ".concat(w),borderRadius:"8px",padding:"20px"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"12px",flexDirection:d?"column":"row",gap:d?"12px":"0"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{style:{margin:"0 0 4px 0",fontSize:"16px",color:v,fontWeight:"600"},children:e.template.title}),(0,n.jsxs)("p",{style:{margin:"0 0 4px 0",color:y,fontSize:"14px"},children:[e.client.firstName," ",e.client.lastName," (",e.client.email,")"]}),(0,n.jsxs)("p",{style:{margin:"0 0 4px 0",color:y,fontSize:"14px"},children:["Archived: ",new Date(e.archivedAt).toLocaleDateString("en-CA",{timeZone:"America/Toronto"})]})]}),(0,n.jsx)("div",{style:{display:"flex",gap:"8px",flexDirection:d?"column":"row"},children:(0,n.jsx)("span",{style:{fontSize:"12px",color:y,backgroundColor:u?"#1e293b":"#f1f5f9",padding:"4px 8px",borderRadius:"4px",alignSelf:d?"flex-start":"auto"},children:m(e.status)})})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[(0,n.jsx)("button",{onClick:()=>window.open("/agreement/".concat(e.uniqueToken),"_blank"),style:{backgroundColor:"#3b82f6",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"background-color 0.2s"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#2563eb"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#3b82f6"},title:"View agreement",children:"View"}),(0,n.jsx)("button",{onClick:()=>h(e.id),disabled:t,style:{backgroundColor:t?"#9ca3af":"#059669",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:t?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500",transition:"background-color 0.2s"},onMouseEnter:e=>{t||(e.currentTarget.style.backgroundColor="#047857")},onMouseLeave:e=>{t||(e.currentTarget.style.backgroundColor="#059669")},title:"Unarchive this agreement",children:t?"Unarchiving...":"Unarchive"})]})]},e.id))})]})]})}},8129:(e,r,t)=>{"use strict";t.d(r,{d:()=>a});var n=t(5155),o=t(2115);function i(e){let{message:r,type:t="success",duration:i=3e3,onClose:a}=e,[s,l]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{let e=setTimeout(()=>{l(!1),setTimeout(()=>null==a?void 0:a(),300)},i);return()=>clearTimeout(e)},[i,a]),(0,n.jsx)("div",{style:(()=>{let e={position:"fixed",top:"20px",right:"20px",zIndex:9999,padding:"12px 20px",borderRadius:"8px",color:"white",fontSize:"14px",fontWeight:"500",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",transform:s?"translateX(0)":"translateX(100%)",transition:"transform 0.3s ease-in-out",maxWidth:"300px",wordWrap:"break-word"};switch(t){case"success":default:return{...e,backgroundColor:"#10b981"};case"error":return{...e,backgroundColor:"#ef4444"};case"info":return{...e,backgroundColor:"#3b82f6"}}})(),children:r})}function a(){let[e,r]=(0,o.useState)([]),t=e=>{r(r=>r.filter(r=>r.id!==e))};return{showToast:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",n=Date.now();r(r=>[...r,{id:n,message:e,type:t}])},ToastContainer:()=>(0,n.jsx)("div",{children:e.map(e=>(0,n.jsx)(i,{message:e.message,type:e.type,onClose:()=>t(e.id)},e.id))})}}},8758:(e,r,t)=>{"use strict";t.d(r,{D:()=>s,L:()=>a});var n=t(5155),o=t(2115);let i=(0,o.createContext)(void 0);function a(e){let{children:r}=e,[t,a]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{let e=localStorage.getItem("darkMode");null!==e&&a(JSON.parse(e))},[]),(0,o.useEffect)(()=>{localStorage.setItem("darkMode",JSON.stringify(t))},[t]),(0,n.jsx)(i.Provider,{value:{isDark:t,toggleDarkMode:()=>{a(!t)}},children:r})}function s(){let e=(0,o.useContext)(i);if(void 0===e)throw Error("useDarkMode must be used within a DarkModeProvider");return e}},6046:(e,r,t)=>{"use strict";var n=t(6658);t.o(n,"useParams")&&t.d(r,{useParams:function(){return n.useParams}}),t.o(n,"usePathname")&&t.d(r,{usePathname:function(){return n.usePathname}}),t.o(n,"useRouter")&&t.d(r,{useRouter:function(){return n.useRouter}})}},e=>{var r=r=>e(e.s=r);e.O(0,[8441,1517,7358],()=>r(1482)),_N_E=e.O()}]);