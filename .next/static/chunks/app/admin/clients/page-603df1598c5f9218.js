(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[97],{7827:(e,t,o)=>{Promise.resolve().then(o.bind(o,887))},887:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var r=o(5155),i=o(2115),n=o(8758);function l(){let[e,t]=(0,i.useState)([]),[o,l]=(0,i.useState)(!1),[a,s]=(0,i.useState)(null),[d,p]=(0,i.useState)(!1),[c,x]=(0,i.useState)(!1),[f,g]=(0,i.useState)({firstName:"",lastName:"",email:"",phone:"",eventDate:"",notes:""}),{isDark:h}=(0,n.D)();(0,i.useEffect)(()=>{let e=()=>{x(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,i.useEffect)(()=>{u()},[]);let u=async()=>{try{let e=await fetch("/api/clients");if(e.ok){let o=await e.json();t(o)}}catch(e){console.error("Error fetching clients:",e)}},b=async o=>{o.preventDefault(),p(!0);try{let o=await fetch("/api/clients",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)});if(o.ok){let r=await o.json();t([r,...e]),l(!1),g({firstName:"",lastName:"",email:"",phone:"",eventDate:"",notes:""}),alert("Client added successfully!")}else try{let e=await o.json(),t=e.error||e.message||"Unknown error occurred";alert("Error: ".concat(t))}catch(e){console.error("Failed to parse error response:",e),alert("Error: Failed to create client (".concat(o.status,")"))}}catch(e){console.error("Error creating client:",e),alert("Failed to create client")}finally{p(!1)}},m=e=>{s(e),g({firstName:e.firstName,lastName:e.lastName,email:e.email,phone:e.phone||"",eventDate:e.eventDate?new Date(e.eventDate).toISOString().split("T")[0]:"",notes:e.notes||""}),l(!0)},y=async o=>{if(o.preventDefault(),a){p(!0);try{let o=await fetch("/api/clients/update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...f,id:a.id})});if(o.ok){let r=await o.json();t(e.map(e=>e.id===a.id?r:e)),l(!1),s(null),g({firstName:"",lastName:"",email:"",phone:"",eventDate:"",notes:""}),alert("Client updated successfully!")}else try{let e=await o.json(),t=e.error||e.message||"Unknown error occurred";alert("Error: ".concat(t))}catch(e){console.error("Failed to parse error response:",e),alert("Error: Failed to update client (".concat(o.status,")"))}}catch(e){console.error("Error updating client:",e),alert("Failed to update client")}finally{p(!1)}}},v=h?"#f8fafc":"#0f172a",j=h?"#1e293b":"#ffffff",w=h?"#334155":"#e2e8f0",C=h?"#94a3b8":"#64748b",S=h?"#0f172a":"#ffffff";return(0,r.jsxs)("div",{style:{padding:c?"16px":"24px",backgroundColor:h?"#0f172a":"#f8fafc",minHeight:"100vh",color:v},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:c?"flex-start":"center",marginBottom:"24px",flexDirection:c?"column":"row",gap:c?"16px":"0"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{style:{margin:"0 0 8px 0",fontSize:c?"24px":"32px",color:v,fontWeight:"bold"},children:c?"Clients":"Photobooth Guys - Clients"}),(0,r.jsx)("p",{style:{margin:0,color:C,fontSize:"16px"},children:"Manage your client information"})]}),(0,r.jsx)("button",{onClick:()=>l(!0),style:{backgroundColor:"#059669",color:"white",border:"none",padding:c?"12px 16px":"12px 24px",borderRadius:"6px",cursor:"pointer",fontSize:c?"14px":"16px",fontWeight:"500",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",width:c?"100%":"auto"},title:"Add a new client to the system",children:"+ Add Client"})]}),o&&(0,r.jsxs)("div",{style:{backgroundColor:j,padding:c?"16px":"24px",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",border:"1px solid ".concat(w),marginBottom:"24px"},children:[(0,r.jsx)("h2",{style:{margin:"0 0 24px 0",fontSize:"20px",color:v,fontWeight:"bold"},children:a?"Edit Client":"Add New Client"}),(0,r.jsxs)("form",{onSubmit:a?y:b,children:[(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:c?"1fr":"1fr 1fr",gap:"20px",marginBottom:"20px"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:v},children:"First Name *"}),(0,r.jsx)("input",{type:"text",value:f.firstName,onChange:e=>g({...f,firstName:e.target.value}),required:!0,title:"Client's first name",style:{width:"100%",padding:"12px 16px",border:"1px solid ".concat(w),borderRadius:"6px",fontSize:"16px",backgroundColor:S,color:v,boxSizing:"border-box"}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:v},children:"Last Name *"}),(0,r.jsx)("input",{type:"text",value:f.lastName,onChange:e=>g({...f,lastName:e.target.value}),required:!0,title:"Client's last name",style:{width:"100%",padding:"12px 16px",border:"1px solid ".concat(w),borderRadius:"6px",fontSize:"16px",backgroundColor:S,color:v,boxSizing:"border-box"}})]})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:v},children:"Email *"}),(0,r.jsx)("input",{type:"email",value:f.email,onChange:e=>g({...f,email:e.target.value}),required:!0,title:"Client's email address for communication",style:{width:"100%",padding:"12px 16px",border:"1px solid ".concat(w),borderRadius:"6px",fontSize:"16px",backgroundColor:S,color:v,boxSizing:"border-box"}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:v},children:"Phone"}),(0,r.jsx)("input",{type:"tel",value:f.phone,onChange:e=>g({...f,phone:e.target.value}),title:"Client's phone number",style:{width:"100%",padding:"12px 16px",border:"1px solid ".concat(w),borderRadius:"6px",fontSize:"16px",backgroundColor:S,color:v,boxSizing:"border-box"}})]})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"16px",marginBottom:"16px"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:v},children:"Event Date"}),(0,r.jsx)("input",{type:"date",value:f.eventDate,onChange:e=>g({...f,eventDate:e.target.value}),title:"Date of the client's event",style:{width:"100%",padding:"12px",border:"1px solid ".concat(w),borderRadius:"6px",fontSize:"16px",backgroundColor:S,color:v,colorScheme:h?"dark":"light"}})]}),(0,r.jsx)("div",{})]}),(0,r.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:v},children:"Notes"}),(0,r.jsx)("textarea",{value:f.notes,onChange:e=>g({...f,notes:e.target.value}),rows:3,title:"Additional notes about the client",style:{width:"100%",padding:"12px 16px",border:"1px solid ".concat(w),borderRadius:"6px",fontSize:"16px",resize:"vertical",backgroundColor:S,color:v,boxSizing:"border-box"}})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"12px",flexDirection:c?"column":"row"},children:[(0,r.jsx)("button",{type:"submit",disabled:d,style:{backgroundColor:d?"#9ca3af":"#059669",color:"white",border:"none",padding:c?"12px 16px":"12px 24px",borderRadius:"6px",cursor:d?"not-allowed":"pointer",fontSize:c?"14px":"16px",fontWeight:"500",width:c?"100%":"auto"},title:a?"Save client changes":"Save the new client",children:d?a?"Updating...":"Adding...":a?"Update Client":"Add Client"}),(0,r.jsx)("button",{type:"button",onClick:()=>{l(!1),s(null),g({firstName:"",lastName:"",email:"",phone:"",eventDate:"",notes:""})},style:{backgroundColor:"#6b7280",color:"white",border:"none",padding:c?"12px 16px":"12px 24px",borderRadius:"6px",cursor:"pointer",fontSize:c?"14px":"16px",fontWeight:"500",width:c?"100%":"auto"},title:"Cancel",children:"Cancel"})]})]})]}),(0,r.jsx)("div",{style:{backgroundColor:j,borderRadius:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",border:"1px solid ".concat(w),padding:c?"16px":"24px"},children:0===e.length?(0,r.jsx)("p",{style:{color:C,fontSize:"16px",textAlign:"center"},children:"No clients yet. Add your first client to get started."}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{style:{margin:"0 0 16px 0",fontSize:"20px",color:v,fontWeight:"bold"},children:["Clients (",e.length,")"]}),(0,r.jsx)("div",{style:{display:"grid",gap:"12px"},children:e.map(e=>(0,r.jsxs)("div",{style:{padding:"16px",border:"1px solid ".concat(w),borderRadius:"6px",backgroundColor:h?"#0f172a":"#f8fafc"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"12px",flexDirection:c?"column":"row",gap:c?"8px":"0"},children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{style:{margin:"0 0 4px 0",fontSize:"16px",color:v,fontWeight:"600"},children:[e.firstName," ",e.lastName]}),(0,r.jsx)("p",{style:{margin:"0 0 4px 0",color:C,fontSize:"14px"},children:e.email}),e.phone&&(0,r.jsx)("p",{style:{margin:"0 0 4px 0",color:C,fontSize:"14px"},children:e.phone}),e.eventDate&&(0,r.jsxs)("p",{style:{margin:"0 0 4px 0",color:C,fontSize:"14px"},children:["Event: ",new Date(e.eventDate).toLocaleDateString()]})]}),(0,r.jsxs)("span",{style:{fontSize:"12px",color:C,backgroundColor:h?"#1e293b":"#f1f5f9",padding:"4px 8px",borderRadius:"4px",alignSelf:c?"flex-start":"auto"},children:["Added ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,r.jsx)("div",{style:{display:"flex",gap:"8px",flexDirection:c?"column":"row"},children:(0,r.jsx)("button",{onClick:()=>m(e),style:{backgroundColor:"#3b82f6",color:"white",border:"none",padding:c?"10px 16px":"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:c?"14px":"12px",fontWeight:"500",width:c?"100%":"auto"},title:"Edit client details",children:"Edit"})})]},e.id))})]})})]})}},8758:(e,t,o)=>{"use strict";o.d(t,{D:()=>a,L:()=>l});var r=o(5155),i=o(2115);let n=(0,i.createContext)(void 0);function l(e){let{children:t}=e,[o,l]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{let e=localStorage.getItem("darkMode");null!==e&&l(JSON.parse(e))},[]),(0,i.useEffect)(()=>{localStorage.setItem("darkMode",JSON.stringify(o))},[o]),(0,r.jsx)(n.Provider,{value:{isDark:o,toggleDarkMode:()=>{l(!o)}},children:t})}function a(){let e=(0,i.useContext)(n);if(void 0===e)throw Error("useDarkMode must be used within a DarkModeProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(7827)),_N_E=e.O()}]);